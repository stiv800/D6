User.objects.create_user('user-1')
User.objects.create_user('user-2')
Author.objects.create(authorUser = User.objects.get(username = 'user-1'))
Author.objects.create(authorUser = User.objects.get(username = 'user-2'))
Category.objects.create(category='sport')
Category.objects.create(category='IT')
Category.objects.create(category='humor')
Category.objects.create(category='music')
Post.objects.create(author = Author.objects.get(authorUser = User.objects.get(username = 'user-1')), categoryType = 'AR', title = 'Как назвали статью номер 1?', text = 'Здесь возможно должна быть статья номер 1, но ее еще не написали.')
Post.objects.create(author = Author.objects.get(authorUser = User.objects.get(username = 'user-2')), categoryType = 'NW', title = 'Как назвали новость номер 1?', text = 'Здесь возможно должна быть новость номер 1, но ее еще не написали.')
Post.objects.create(author = Author.objects.get(authorUser = User.objects.get(username = 'user-2')), categoryType = 'AR', title = 'Как назвали статью номер 2?', text = 'Здесь возможно должна быть статья номер 2, но ее еще не написали.')
Post.objects.get(title = 'Как назвали статью номер 1?').postCategorys.add(Category.objects.get(category = 'sport'))
Post.objects.get(title = 'Как назвали статью номер 2?').postCategorys.add(Category.objects.get(category = 'IT'), Category.objects.get(category = 'humor'))
Post.objects.get(title = 'Как назвали новость номер 1?').postCategorys.add(Category.objects.get(category = 'music'))
Comment.objects.create(commentUser = User.objects.get(username = 'user-1'), commentPost = Post.objects.get(title = 'Как назвали новость номер 1?'), text = 'Это комментарий 1')
Comment.objects.create(commentUser = User.objects.get(username = 'user-2'), commentPost = Post.objects.get(title = 'Как назвали статью номер 2?'), text = 'Это комментарий 2')
Comment.objects.create(commentUser = User.objects.get(username = 'user-2'), commentPost = Post.objects.get(title = 'Как назвали статью номер 1?'), text = 'Это комментарий 3')
Comment.objects.create(commentUser = User.objects.get(username = 'user-1'), commentPost = Post.objects.get(title = 'Как назвали статью номер 1?'), text = 'Это комментарий 4')
Post.objects.get(title = 'Как назвали статью номер 1?').like()
Post.objects.get(title = 'Как назвали статью номер 2?').like()
Post.objects.get(title = 'Как назвали новость номер 1?').dislike()
Post.objects.get(title = 'Как назвали статью номер 2?').like()
Post.objects.get(title = 'Как назвали новость номер 1?').dislike()
Comment.objects.get(text = 'Это комментарий 1').like()
Comment.objects.get(text = 'Это комментарий 2').dislike()
Comment.objects.get(text = 'Это комментарий 3').dislike()
Comment.objects.get(text = 'Это комментарий 4').like()
Comment.objects.get(text = 'Это комментарий 1').like()
Author.objects.get(authorUser = User.objects.get(username = 'user-1')).update_rating()
Author.objects.get(authorUser = User.objects.get(username = 'user-2')).update_rating()
best = Author.objects.get(authorUser = Author.objects.all().order_by('-authorRating').values('authorUser')[0]['authorUser'])
print(f'username = {best.authorUser.username} rating = {best.authorRating}')
id_best_post = Post.objects.all().order_by('-postRating').values('id')[0]
best_post = Post.objects.get(id = best_post['id'])
print(f'{best_post.dateCreation} {best_post.author.authorUser.username} {best_post.postRating} {best_post.title} {best_post.preview()}')
comments = Comment.objects.filter(commentPost = best_post)
for x in comments: print(x.dateCreation, x.commentUser.username, x.commentRating, x.text)
